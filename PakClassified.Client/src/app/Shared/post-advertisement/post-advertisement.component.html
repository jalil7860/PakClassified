<div class="post-ad-page">
  <div class="container my-5">
    <div class="form-container">
      
      <!-- Page Header -->
      <div class="page-header text-center mb-5">
        <h1 class="page-title">
          <i class="fas fa-bullhorn me-2"></i>Post Your Advertisement
        </h1>
        <p class="page-subtitle">Reach thousands of buyers with your vehicle listing</p>
      </div>

      <form [formGroup]="PostAdvertisementForm" (ngSubmit)="postSubmit()">
        
        <!-- Basic Information -->
        <div class="form-section">
          <div class="section-header">
            <div class="section-icon">
              <i class="fas fa-info-circle"></i>
            </div>
            <div class="section-title">
              <h5>Basic Information</h5>
              <p>Enter the basic details about your vehicle</p>
            </div>
          </div>

          <div class="section-body">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">Name <span class="required">*</span></label>
                  <div class="input-group-custom">
                    <i class="fas fa-car input-icon"></i>
                    <input type="text" class="form-control ps-5" formControlName="name" placeholder="Enter vehicle name">
                  </div>
                  @if (name_post?.invalid && name_post?.touched) {
                    <div class="d-flex justify-content-start text-danger ms-2">
                      @if (name_post?.hasError('required')) {
                        <div>Required</div>
                      }
                    </div>
                  }
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">Price <span class="required">*</span></label>
                  <div class="input-group-custom">
                    <i class="fas fa-tag input-icon"></i>
                    <input type="text" class="form-control ps-5" formControlName="price" placeholder="Enter price (PKR)">
                  </div>
                  @if (price_post?.invalid && price_post?.touched) {
                    <div class="d-flex justify-content-start text-danger ms-2">
                      @if (price_post?.hasError('required')) {
                        <div>Required</div>
                      }
                    </div>
                  }
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Description <span class="required">*</span></label>
              <div class="input-group-custom">
                <i class="fas fa-file-alt input-icon"></i>
                <textarea class="form-control ps-5" rows="4" formControlName="description" placeholder="Enter detailed description about the vehicle"></textarea>
              </div>
                  @if (description_post?.invalid && description_post?.touched) {
                    <div class="d-flex justify-content-start text-danger ms-2">
                      @if (description_post?.hasError('required')) {
                        <div>Required</div>
                      }
                    </div>
                  }
            </div>

            <div class="form-group">
              <label class="form-label">Features <span class="required">*</span></label>
              <div class="input-group-custom">
                <i class="fas fa-list input-icon"></i>
                <textarea class="form-control ps-5" rows="4" formControlName="features" placeholder="Enter key features (e.g., Air Conditioning, Power Steering, etc.)"></textarea>
              </div>
              @if (features_post?.invalid && features_post?.touched) {
                <div class="d-flex justify-content-start ms-2 text-danger fw-semibold">
                  @if (features_post?.hasError('required')) {}
                </div>
              }
            </div>
          </div>
        </div>

        <!-- Date Range -->
        <div class="form-section">
          <div class="section-header">
            <div class="section-icon">
              <i class="fas fa-calendar-alt"></i>
            </div>
            <div class="section-title">
              <h5>Advertisement Duration</h5>
              <p>Set the start and end date for your ad</p>
            </div>
          </div>

          <div class="section-body">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">Starts On <span class="required">*</span></label>
                  <div class="input-group-custom">
                    <i class="fas fa-play input-icon"></i>
                    <input type="date" class="form-control ps-5" formControlName="startsOn">
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">Ends On <span class="required">*</span></label>
                  <div class="input-group-custom">
                    <i class="fas fa-stop input-icon"></i>
                    <input type="date" class="form-control ps-5" formControlName="endsOn">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Classification -->
        <div class="form-section">
          <div class="section-header">
            <div class="section-icon">
              <i class="fas fa-tags"></i>
            </div>
            <div class="section-title">
              <h5>Classification</h5>
              <p>Categorize your vehicle for better visibility</p>
            </div>
          </div>

          <div class="section-body">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">Type <span class="required">*</span></label>
                  <div class="input-group-custom">
                    <i class="fas fa-cube input-icon"></i>
                    <select class="form-control ps-5" formControlName="typeId">
                      <option value="" disabled selected>Select Type</option>
                      @for (t of Types; track t.id) {
                      <option [ngValue]="t.id">{{t.name}}</option>
                      }
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">City Area <span class="required">*</span></label>
                  <div class="input-group-custom">
                    <i class="fas fa-map-marker-alt input-icon"></i>
                    <select class="form-control ps-5" formControlName="cityAreaId">
                      <option value="" selected>Select City Area</option>
                      @for (ca of CityAreas; track ca.id) {
                      <option [ngValue]="ca.id">{{ca.name}}</option>
                      }
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">Status <span class="required">*</span></label>
                  <div class="input-group-custom">
                    <i class="fas fa-info-circle input-icon"></i>
                    <select class="form-control ps-5" formControlName="statusId">
                      <option value="" selected>Select Status</option>
                      @for (s of Statuses; track s.id) {
                      <option [ngValue]="s.id">{{s.name}}</option>
                      }
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="form-label">Sub Category <span class="required">*</span></label>
                  <div class="input-group-custom">
                    <i class="fas fa-folder input-icon"></i>
                    <select class="form-control ps-5" formControlName="subCategoryId">
                      <option value="" selected>Select Sub Category</option>
                      @for (sub of SubCategories; track sub.id) {
                      <option [ngValue]="sub.id">{{sub.name}}</option>
                      }
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Image Upload -->
<!-- Image Upload Section -->
<div class="form-section">
  <div class="section-header">
    <div class="section-icon">
      <i class="fas fa-image"></i>
    </div>
    <div class="section-title">
      <h5>Upload Image</h5>
      <p>Add a high-quality photo of your vehicle</p>
    </div>
  </div>

  <div class="section-body">
    <div class="form-group">
      <label class="form-label">Vehicle Image <span class="required">*</span></label>
      
      <!-- Simple File Upload Area -->
      <div class="file-upload-wrapper" (click)="fileInput.click()">
        <div class="upload-icon">
          <i class="fas fa-cloud-upload-alt"></i>
        </div>
        <div class="upload-content">
          <h6>Click to upload image</h6>
          <p>PNG, JPG, JPEG (Max 5MB)</p>
        </div>
      </div>
      
      <!-- Hidden File Input - multiple attribute remove karo -->
      <input type="file" #fileInput 
             (change)="onFileSelected($event)"
             class="d-none" 
             accept="image/*">
      
      <!-- Uploaded Image Preview -->
      <div class="upload-preview mt-4" *ngIf="selectedImage">
        <div class="row">
          <div class="col-6 col-md-4 col-lg-3">
            <div class="image-preview-card">
              <img [src]="selectedImage.url" alt="Preview" class="preview-image">
              <button type="button" class="btn-remove" (click)="removeImage()">
                <i class="fas fa-times"></i>
              </button>
              <div class="image-info">
                <small class="text-muted">{{ selectedImage.name }}</small>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Empty State -->
      <div class="upload-preview mt-3" *ngIf="!selectedImage">
        <div class="preview-text text-center py-4">
          <i class="fas fa-images text-muted mb-2" style="font-size: 2rem;"></i>
          <p class="text-muted mb-0">No image selected</p>
        </div>
      </div>
    </div>
  </div>
</div>

        <!-- Submit Button -->
        <div class="form-actions">
          <button type="submit" class="btn btn-submit w-100">
            <i class="fas fa-paper-plane me-2"></i>
            Post Advertisement
          </button>
          <p class="text-muted text-center mt-3 mb-0">
            <small>By posting this ad, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></small>
          </p>
        </div>
      </form>
    </div>
  </div>
</div>